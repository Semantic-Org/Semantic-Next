---
import InPageMenu from'@components/InPageMenu/InPageMenu.js';
const { currentRoute, menu, useAccordion, scrollOffset, entry } = Astro.props;
import './DocsRail.css';

const getMenu = function() {
  if(menu) {
    return menu;
  }
  if(entry) {
    return [];
  }
};
---
<railMenu>
   <InPageMenu
      menu={getMenu()}
      useAccordion={useAccordion}
      intersectionContext='layout page'
      scrollContext='layout page'
      scrollOffset={scrollOffset || 120}
      smoothScroll=true
      client:load
  ></InPageMenu>
  <script is:client>
    const el = document.querySelector('inpage-menu');
    el.onSamePageActive = function(element, itemID) {
      $(element).addClass('highlight');
      setTimeout(() => {
        $(element).removeClass('highlight');
      }, 300)
    };
  </script>
</railMenu>
