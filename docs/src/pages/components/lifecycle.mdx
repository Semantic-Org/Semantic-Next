---
layout: '@layouts/Guide.astro'
title: Component Lifecycle
icon: refresh-cw
description: An overview of component lifecycle
---
import { Image } from 'astro:assets';
import PlaygroundExample from '@components/PlaygroundExample/PlaygroundExample.astro';

import lifecycleImage from '@images/lifecycle-diagram.png';

## Overview

Semantic UI components wrap native web components but provide additional callbacks to handle the lifecycle of the underlying component template.

* **createInstance** - Defines your component instance that can be invoked from the DOM or from instance a template's data context
* **onCreated** - Callback after your component instance is initialized to handle things that don't require the DOM
* **onRendered** - Callback after your component is rendered to the page
* **onDestroyed** - Callback after your component is removed from the page


## Callback Arguments

Each callback receives a destructurable set of arguments that can be used to interact with the internals of the component

### All Callbacks

| parameter         | use                                                   |
|-------------------|-------------------------------------------------------|
| el                | the DOM element of the web component                  |
| tpl               | the template instance from createInstance             |
| $                 | allows you to query the shadow dom of the component   |
| $$                | allows querying deep nested content including slots   |
| reaction          | a reactive context for computations                   |
| reactiveVar       | a function to define a reactive variable              |
| afterFlush        | a callback after reactive computations are flushed    |
| settings          | a read-write copy of the component's settings         |
| state             | a reactive data store for internal state              |
| data              | the full data context used when evaluated expressions |
| isRendered        | a function returning whether the DOM has rendered     |
| isServer          | whether component is rendering on server              |
| isClient          | whether component is rendering on client              |
| dispatchEvent     | helper to emit events from the component              |
| attachEvent       | helper to listen to external events                   |
| bindKey           | helper to bind keyboard shortcuts dynamically         |
| abortController   | abortSignal for async events tied to lifecycle        |
| template          | the underlying semantic template                      |
| templateName      | the name of the current semantic template             |
| templates         | all rendered templates on current page                |
| findTemplate      | helper to find a specific template                    |
| findParent        | helper to find a specific parent template             |
| findChild         | helper to find a child template                       |
| findChildren      | helper to find multiple child templates               |
| darkMode          | boolean for if dark mode is active                    |

### Event Callbacks Only

Event handlers also have access to a few additional arguments
| parameter         | use                                              |
|-------------------|--------------------------------------------------|
| el                | the dom element that fired the event             |
| event             | the event object                                 |
| data              | event.detail + data attributes on dom element    |

#### Key Bindings Only

Key bindings also have access to a few additional arguments
| parameter         | use                                              |
|-------------------|--------------------------------------------------|
| inputFocused      | whether any input/contenteditable is focused     |
| repeatedKey       | whether the key is held down                     |

## Callbacks

### createInstance

`createInstance` is used to defined the component instance at runtime. Each web component will have its own instance which will include its own state and settings.

#### Initialize

If you include a method called `initialize` in your returned instance it will be called immediately allowing you to set up initial state for the component, for instance adding any reactive calcuations or dynamically defined variables.

### onCreated

`onCreated` fires **after the instance is defined but before the DOM is rendered**. You can use this callback to handle special behaviors that require the component instance but not its rendered DOM, for instance attaching external event handlers to the page.

### onRendered

The `onRendered` callback occurs **after the initial render** of the web components Shadow DOM.

This can be used to run code which requires access to the DOM. Although this callback will fire on the server you will not be able to access deeply nested DOM as server rendered components are rendered in isolation.

### onDestroyed

The `onDestroyed` callback is called after the component is removed from the page.

### onThemeChanged

The `onThemeChanged` callback is a special callback that fires when a user swaps themes. This can be used to modify the component based on whether the user prefers light or dark mode.

## Event Sequence

The following diagram shows the sequence of events that occur when a component is rendered to the page.

<Image src={lifecycleImage} alt="Component Lifecycle" width="826" loading="eager"></Image>
