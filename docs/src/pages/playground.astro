---
  import Playground from '@layouts/Playground.astro';
  import {
    htmlBefore,
    htmlAfter,
    cssBefore,
    jsBefore,
    importMap
  } from '@helpers/playground.js';

  const htmlContent = `<ui-counter></ui-counter>`;
  const cssContent = `/* playground-hide */ body { padding 1rem; font-family: Lato; } /* playground-hide-end */ui-counter {
  font-size: 18px;
  font-weight: bold;
}`;
  const jsContent = `import { createComponent } from '@semantic-ui/component';
import { ReactiveVar, Reaction } from '@semantic-ui/reactivity';

import template from './template.css?raw';
import css from './template.css?raw';

const createInstance = ({tpl}) => ({
   timer: new ReactiveVar(0),
   isEven() {
     return tpl.timer.get() % 2 == 0;
   },
   tick() {
     tpl.timer.increment();
   };
});

const onCreated = ({tpl}) => ({
  setInterval(tpl.tick, 1000);
});

createComponent({
  tagName: 'ui-counter',
  template,
  createInstance,
  onCreated,
});`;

  const projectConfig = {
    importMap: importMap,
    files: {
      'component.js': {
        contentType: 'text/javascript',
        content: `${jsBefore}${jsContent}`
      },
      'component.html': {
        contentType: 'text/html',
        content: `<div class="timer">
  The timer is {{timer}}
</div>
<div class="even">
  {{#if isEven timer}}
    Even
  {{else}}
    Odd
  {{/if}}
</div>`
      },
      'component.css': {
        contentType: 'text/css',
        content: `.timer {
  border: var(--border);
  padding: var(--padding);
  border-radius: var(--border-radius);
}`
      },
      'index.html': {
        contentType: 'text/html',
        content: `${htmlBefore}${htmlContent}${htmlAfter}`
      },
      'index.css': {
        contentType: 'text/css',
        content: `${cssBefore}${cssContent}`
      }
    }
  };
---
<script>
  import 'playground-elements/playground-project.js';
  import 'playground-elements/playground-file-editor.js';
  import 'playground-elements/playground-preview.js';
</script>
<Playground>
  <playground-project id="source"></playground-project>
  <script define:vars={{ projectConfig }}>
    document.querySelector('playground-project').config = projectConfig;
  </script>
  <playground>
    <panes>
      <pane>
        <label>Component JS</label>
        <playground-tab-bar editor="editor1" editable-file-system></playground-tab-bar>
        <playground-file-editor line-numbers project="source" filename="component.js"> </playground-file-editor>
      </pane>
      <pane>
        <label>Component Template</label>
        <playground-tab-bar editor="editor1" editable-file-system></playground-tab-bar>
        <playground-file-editor line-numbers project="source" filename="component.html"> </playground-file-editor>
      </pane>
      <pane>
        <label>Component CSS</label>
        <playground-tab-bar editor="editor1" editable-file-system></playground-tab-bar>
        <playground-file-editor line-numbers project="source" filename="component.css"> </playground-file-editor>
      </pane>
    </panes>
    <panes>
      <pane>
        <label>Page HTML</label>
        <playground-file-editor line-numbers project="source" filename="index.html"> </playground-file-editor>
      </pane>
      <pane>
        <label>Page CSS</label>
        <playground-file-editor line-numbers project="source" filename="index.css"> </playground-file-editor>
      </pane>
      <pane class="preview">
        <playground-preview project="source"> </playground-preview>
      </pane>
    </panes>
  </playground>
  <script>
    const editor = document.querySelectorAll('playground-file-editor');
  </script>
</Playground>
